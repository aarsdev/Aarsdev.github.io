<section id="snake-game">
  <h2>ğŸ Google Snake Doodle Clone</h2>
  <p>Use â¬…ï¸â¬†ï¸â¬‡ï¸â¡ï¸ keys to move the snake. Eat the apples ğŸ and grow!</p>

  <a href="index.html" style="
      display:inline-block;
      padding:10px 20px;
      background-color:black;
      color:#00ff9c;
      border:2px solid #00ff9c;
      border-radius:8px;
      text-decoration:none;
      font-weight:bold;
      transition:0.2s;
      margin-bottom:10px;
  ">ğŸ  Back to Home</a>

  <p>Score: <span id="snake-score">0</span> | High Score: <span id="snake-highscore">0</span></p>
  <canvas id="snake-canvas" width="400" height="400" style="background-color:black; display:block; margin:0 auto; border:2px solid #00ff9c;"></canvas>
  <p id="snake-gameover" style="color:red; display:none; font-size:24px;">ğŸ’¥ Game Over! Press R to Restart</p>
</section>

<script>
const canvas = document.getElementById('snake-canvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('snake-score');
const highScoreEl = document.getElementById('snake-highscore');
const gameOverEl = document.getElementById('snake-gameover');

const gridSize = 20;
const tileCount = canvas.width / gridSize;

let snake = [{x: 10, y: 10}];
let food = {x: Math.floor(Math.random() * tileCount), y: Math.floor(Math.random() * tileCount)};
let dx = 1; // initial direction: moving right
let dy = 0;
let score = 0;
let highScore = localStorage.getItem('snakeHighScore') || 0;
highScoreEl.innerText = highScore;
let gameRunning = true;

function drawCell(x, y, color){
  ctx.fillStyle = color;
  ctx.fillRect(x * gridSize, y * gridSize, gridSize-1, gridSize-1);
}

function draw(){
  ctx.fillStyle = 'black';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw food
  drawCell(food.x, food.y, 'red');

  // Draw snake
  snake.forEach((segment, index)=>{
    drawCell(segment.x, segment.y, '#00ff9c');
  });
}

function update(){
  if(!gameRunning) return;

  const head = {x: snake[0].x + dx, y: snake[0].y + dy};

  // Check collisions
  if(head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount){
    endGame();
    return;
  }
  if(snake.some(seg=>seg.x === head.x && seg.y === head.y)){
    endGame();
    return;
  }

  snake.unshift(head);

  // Eat food
  if(head.x === food.x && head.y === food.y){
    score += 1;
    scoreEl.innerText = score;
    spawnFood();
  } else {
    snake.pop();
  }
}

function spawnFood(){
  let newX = Math.floor(Math.random() * tileCount);
  let newY = Math.floor(Math.random() * tileCount);
  while(snake.some(seg => seg.x === newX && seg.y === newY)){
    newX = Math.floor(Math.random() * tileCount);
    newY = Math.floor(Math.random() * tileCount);
  }
  food.x = newX;
  food.y = newY;
}

document.addEventListener('keydown', e=>{
  if(!gameRunning && e.code === 'KeyR'){ restartGame(); return; }
  if(e.code === 'ArrowUp' && dy === 0){ dx = 0; dy = -1; }
  if(e.code === 'ArrowDown' && dy === 0){ dx = 0; dy = 1; }
  if(e.code === 'ArrowLeft' && dx === 0){ dx = -1; dy = 0; }
  if(e.code === 'ArrowRight' && dx === 0){ dx = 1; dy = 0; }
});

function endGame(){
  gameRunning = false;
  gameOverEl.style.display = 'block';
  if(score > highScore){
    highScore = score;
    localStorage.setItem('snakeHighScore', highScore);
    highScoreEl.innerText = highScore;
  }
}

function restartGame(){
  gameOverEl.style.display = 'none';
  snake = [{x: 10, y: 10}];
  dx = 1; dy = 0;
  score = 0;
  scoreEl.innerText = score;
  food = {x: Math.floor(Math.random() * tileCount), y: Math.floor(Math.random() * tileCount)};
  gameRunning = true;
}

function gameLoop(){
  if(gameRunning){
    update();
    draw();
  }
  setTimeout(gameLoop, 100); // snake speed
}

gameLoop();
</script>

