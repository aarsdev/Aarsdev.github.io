<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ARGUS â€” Journey to Odysseus</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: radial-gradient(#050505, #000);
  font-family: Orbitron, sans-serif;
  overflow: hidden;
  touch-action: manipulation;
}

canvas {
  display: block;
  margin: auto;
  border: 4px solid #00f2ff;
  box-shadow: 0 0 45px #00f2ff;
  background: #020202;
}

#ui {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.88);
  z-index: 10;
}

.menu {
  background: #111;
  padding: 40px;
  border-radius: 20px;
  border: 2px solid #ff00ff;
  text-align: center;
}

button {
  padding: 14px 30px;
  font-size: 16px;
  font-family: Orbitron;
  border: none;
  cursor: pointer;
  background: linear-gradient(45deg,#ff00ff,#00f2ff);
  color: #fff;
}

#hud {
  position: fixed;
  top: 15px;
  width: 100%;
  text-align: center;
  color: #00f2ff;
  font-size: 20px;
}
</style>
</head>

<body>

<div id="ui">
  <div class="menu">
    <h1 style="color:#00f2ff;">ARGUS</h1>
    <p>Journey to Odysseus</p>
    <button onclick="start()">START JOURNEY</button>
    <p style="font-size:12px;opacity:0.7;margin-top:10px;">
      Tap / Click / Space to Jump
    </p>
  </div>
</div>

<div id="hud">DISTANCE: <span id="score">0</span></div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 960;
canvas.height = 540;

let active = false;
let frame = 0;
let score = 0;
let speed = 4;
let graceFrames = 0;

// resize for mobile screens
function resize() {
  const scale = Math.min(
    window.innerWidth / 960,
    window.innerHeight / 540
  );
  canvas.style.transform = `scale(${scale})`;
  canvas.style.transformOrigin = "top center";
}
window.addEventListener("resize", resize);
resize();

// ðŸŒŒ background stars
const stars = [...Array(100)].map(() => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  s: Math.random() * 2 + 0.5
}));

// ðŸ• ARGUS
const dog = {
  x: 120,
  y: 120,      // START HIGH
  vy: -2,      // gentle float
  gravity: 0.7,
  jump: -11,
  tail: 0,
  breath: 0,

  update() {
    if (graceFrames > 0) {
      graceFrames--;
    } else {
      this.vy += this.gravity;
    }

    this.y += this.vy;
    this.tail = Math.sin(frame * 0.25) * 0.6;
    this.breath = Math.sin(frame * 0.1) * 1.5;

    if (this.y < 40 || this.y > canvas.height - 60) lose();
  },

  draw() {
    ctx.save();
    ctx.translate(this.x, this.y + this.breath);

    // body
    ctx.fillStyle = "#8b5a2b";
    ctx.beginPath();
    ctx.ellipse(0, 0, 32, 16, 0, 0, Math.PI * 2);
    ctx.fill();

    // head
    ctx.beginPath();
    ctx.ellipse(40, -10, 13, 11, 0, 0, Math.PI * 2);
    ctx.fill();

    // ears
    ctx.fillStyle = "#5c3a1a";
    ctx.beginPath();
    ctx.ellipse(38, -22, 4, 9, -0.4, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(48, -22, 4, 9, 0.4, 0, Math.PI * 2);
    ctx.fill();

    // snout
    ctx.fillStyle = "#a67c52";
    ctx.beginPath();
    ctx.ellipse(53, -8, 7, 4, 0, 0, Math.PI * 2);
    ctx.fill();

    // nose
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(58, -8, 2.5, 0, Math.PI * 2);
    ctx.fill();

    // eye
    ctx.beginPath();
    ctx.arc(45, -13, 2.5, 0, Math.PI * 2);
    ctx.fill();

    // legs
    ctx.fillStyle = "#8b5a2b";
    [-25,-10,15,30].forEach(x=>{
      ctx.fillRect(x,15,7,28);
      ctx.beginPath();
      ctx.ellipse(x+3.5,43,4,2,0,0,Math.PI*2);
      ctx.fill();
    });

    // tail
    ctx.save();
    ctx.translate(-45,-5);
    ctx.rotate(this.tail - 0.3);
    ctx.beginPath();
    ctx.ellipse(0,0,18,5,0,0,Math.PI*2);
    ctx.fill();
    ctx.restore();

    ctx.restore();

    ctx.fillStyle="#ffd27f";
    ctx.font="bold 16px Orbitron";
    ctx.fillText("ARGUS", this.x - 26, this.y - 40);
  }
};

// ðŸ§ ODYSSEUS
const odysseus = {
  x: canvas.width - 120,
  y: 210,
  draw() {
    ctx.strokeStyle = "#FFD700";
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.arc(this.x,this.y,18,Math.PI,0);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(this.x,this.y);
    ctx.lineTo(this.x,this.y+75);
    ctx.stroke();
  }
};

// ðŸš§ obstacles
let obstacles = [];
class Obstacle {
  constructor() {
    this.x = canvas.width;
    this.w = 70;
    this.gap = 220;
    this.top = Math.random() * 200 + 60;
  }
  update() { this.x -= speed; }
  draw() {
    ctx.fillStyle = "#00f2ff";
    ctx.fillRect(this.x, 0, this.w, this.top);
    ctx.fillRect(this.x, this.top + this.gap, this.w, canvas.height);
  }
}

// ðŸŽ® game control
function start() {
  document.getElementById("ui").style.display = "none";
  obstacles = [];
  score = 0;
  frame = 0;
  speed = 4;
  graceFrames = 30;
  dog.y = 120;
  dog.vy = -2;
  active = true;
  loop();
}

function lose() {
  if (!active) return;
  active = false;
  alert("Argus failed the journey.");
  document.getElementById("ui").style.display = "flex";
}

function win() {
  active = false;
  alert("ðŸ† Argus reached Odysseus!");
  document.getElementById("ui").style.display = "flex";
}

// INPUT (PC + MOBILE)
function jump() {
  if (!active) return;
  dog.vy = dog.jump;
}

window.addEventListener("keydown", e => {
  if (e.code === "Space") jump();
});

canvas.addEventListener("mousedown", jump);
canvas.addEventListener("touchstart", e => {
  e.preventDefault();
  jump();
}, { passive:false });

// ðŸ” loop
function loop() {
  if (!active) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  stars.forEach(s=>{
    s.x -= s.s * 0.2;
    if (s.x < 0) s.x = canvas.width;
    ctx.fillStyle="#444";
    ctx.fillRect(s.x,s.y,s.s,s.s);
  });

  if (frame % 110 === 0) obstacles.push(new Obstacle());

  for (let i = obstacles.length - 1; i >= 0; i--) {
    const o = obstacles[i];
    o.update();
    o.draw();

    if (
      dog.x + 30 > o.x &&
      dog.x - 30 < o.x + o.w &&
      (dog.y < o.top || dog.y > o.top + o.gap)
    ) lose();

    if (o.x + o.w < 0) obstacles.splice(i, 1);
  }

  dog.update();
  dog.draw();
  odysseus.draw();

  if (dog.x + 30 >= odysseus.x - 20) win();

  score++;
  document.getElementById("score").innerText = score;

  frame++;
  requestAnimationFrame(loop);
}
</script>
</body>
</html>
