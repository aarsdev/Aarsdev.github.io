<section id="crossy-roads">
  <h2>üê∏ Aarush's Crossy Roads</h2>
  <p>Use ‚¨ÖÔ∏è‚û°Ô∏è‚¨ÜÔ∏è‚¨áÔ∏è keys to move. Cross the lanes, dodge the cars, survive as long as you can!</p>

  <!-- Home button -->
  <a href="index.html" style="
      display:inline-block;
      padding:10px 20px;
      background-color:black;
      color:#00ff9c;
      border:2px solid #00ff9c;
      border-radius:8px;
      text-decoration:none;
      font-weight:bold;
      transition:0.2s;
      margin-bottom:10px;
  ">üè† Back to Home</a>

  <p>Score: <span id="crossy-score">0</span> | High Score: <span id="crossy-highscore">0</span></p>
  <div id="crossy-area"></div>
  <p id="crossy-gameover" style="color:red; display:none; font-size:24px;">üí• Game Over! Press R to Restart</p>
</section>

<style>
#crossy-area {
  position: relative;
  width: 600px;
  height: 400px;
  margin: 0 auto;
  background-color: #111;
  border: 2px solid #00ff9c;
  overflow: hidden;
}

.player {
  position: absolute;
  width: 40px;
  height: 40px;
  font-size:32px;
  text-align:center;
  line-height:40px;
}

.lane {
  position: absolute;
  width: 100%;
  height: 50px;
}

.car {
  position: absolute;
  width: 50px;
  height: 40px;
  background-color:red;
  border-radius:5px;
}
</style>

<script>
const area = document.getElementById('crossy-area');
const scoreEl = document.getElementById('crossy-score');
const highScoreEl = document.getElementById('crossy-highscore');
const gameOverEl = document.getElementById('crossy-gameover');

let lanes = 7;
let laneHeight = 50;
let player = {x: 280, y: 350, step: 50};
let score = 0;
let speed = 2;
let cars = [];
let gameRunning = true;
let highScore = localStorage.getItem('crossyHighScore') || 0;
highScoreEl.innerText = highScore;

// Create player
const playerEl = document.createElement('div');
playerEl.classList.add('player');
playerEl.innerText = 'üê∏';
playerEl.style.left = player.x + 'px';
playerEl.style.top = player.y + 'px';
area.appendChild(playerEl);

// Handle player movement
document.addEventListener('keydown', e => {
  if(!gameRunning && e.code === 'KeyR'){ restartGame(); return; }
  if(e.code==='ArrowLeft') player.x -= player.step;
  if(e.code==='ArrowRight') player.x += player.step;
  if(e.code==='ArrowUp') player.y -= player.step;
  if(e.code==='ArrowDown') player.y += player.step;

  if(player.x<0) player.x=0;
  if(player.x>area.clientWidth-40) player.x=area.clientWidth-40;
  if(player.y<0){
    score +=1;
    scoreEl.innerText = score;
    player.y = 350;
  }
  if(player.y>350) player.y=350;

  playerEl.style.left = player.x + 'px';
  playerEl.style.top = player.y + 'px';
});

// Create lanes
for(let i=0;i<lanes;i++){
  const laneDiv = document.createElement('div');
  laneDiv.classList.add('lane');
  laneDiv.style.top = i*laneHeight + 'px';
  area.appendChild(laneDiv);
}

// Spawn cars randomly
function spawnCar(){
  if(!gameRunning) return;
  let laneNum = Math.floor(Math.random()*lanes);
  let car = document.createElement('div');
  car.classList.add('car');
  car.style.top = laneNum*laneHeight + 'px';
  car.style.left = (Math.random() > 0.5 ? -50 : area.clientWidth) + 'px';
  car.dataset.direction = car.offsetLeft<0 ? 'right':'left';
  cars.push(car);
  area.appendChild(car);
}

// Move cars
function moveCars(){
  cars.forEach((car,index)=>{
    let left = parseInt(car.style.left);
    if(car.dataset.direction==='right') left += speed;
    else left -= speed;
    car.style.left = left + 'px';

    // Remove offscreen cars
    if(left>area.clientWidth || left<-50){
      area.removeChild(car);
      cars.splice(index,1);
    }

    // Collision check
    if(player.x < left+50 && player.x+40 > left && player.y < parseInt(car.style.top)+40 && player.y+40 > parseInt(car.style.top)){
      endGame();
    }
  });
}

// Game loop
function gameLoop(){
  if(!gameRunning) return;
  moveCars();
  requestAnimationFrame(gameLoop);
}

// Intervals
setInterval(spawnCar, 1000);

// Game over
function endGame(){
  gameRunning=false;
  gameOverEl.style.display='block';
  if(score>highScore){
    highScore=score;
    localStorage.setItem('crossyHighScore', highScore);
    highScoreEl.innerText = highScore;
  }
}

// Restart game
function restartGame(){
  gameOverEl.style.display='none';
  cars.forEach(c=>area.removeChild(c));
  cars=[];
  player.x=280;
  player.y=350;
  playerEl.style.left = player.x+'px';
  playerEl.style.top = player.y+'px';
  score=0;
  scoreEl.innerText=score;
  speed=2;
  gameRunning=true;
  gameLoop();
}

// Start game
gameLoop();
</script>

