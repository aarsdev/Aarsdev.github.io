<!DOCTYPE html>
<html>
<head>
    <title>NEON FLY | ARCADE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #050505; color: #fff; font-family: 'Orbitron', sans-serif; overflow: hidden; touch-action: manipulation; }
        canvas { display: block; margin: auto; border: 4px solid #00f2ff; box-shadow: 0 0 20px #00f2ff; }
        #ui { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); z-index: 10; }
        input { padding: 15px; background: #111; border: 2px solid #ff00ff; color: #fff; font-family: 'Orbitron'; margin-bottom: 10px; text-align: center; }
        button { padding: 15px 30px; background: #ff00ff; border: none; color: #fff; cursor: pointer; font-family: 'Orbitron'; font-weight: bold; }
        #score-board { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); font-size: 30px; color: #00f2ff; text-shadow: 0 0 10px #00f2ff; pointer-events: none; }
    </style>
</head>
<body>

<div id="ui">
    <h1 style="color:#00f2ff">NEON FLY</h1>
    <input type="text" id="username" placeholder="NAME YOUR PILOT" maxlength="10">
    <button onclick="startGame()">START MISSION</button>
</div>

<div id="score-board">0</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('score-board');
const lobby = document.getElementById('ui');

canvas.width = 400;
canvas.height = 600;

let gameActive = false;
let score = 0;
let pipes = [];
let frame = 0;

// --- 1. THE PLAYER (The code you shared!) ---
const bird = {
    x: 50,
    y: 300,
    velocity: 0,
    gravity: 0.6,
    lift: -8,
    size: 25,
    update() {
        this.velocity += this.gravity;
        this.y += this.velocity;
        if (this.y + this.size > canvas.height) { this.y = canvas.height - this.size; gameOver(); }
        if (this.y < 0) { this.y = 0; this.velocity = 0; }
    },
    show() {
        ctx.fillStyle = '#ff00ff';
        ctx.shadowBlur = 15;
        ctx.shadowColor = '#ff00ff';
        ctx.fillRect(this.x, this.y, this.size, this.size);
        ctx.shadowBlur = 0; // Reset glow for other items
    }
};

// --- 2. THE OBSTACLES (Pipes) ---
class Pipe {
    constructor() {
        this.gap = 150;
        this.width = 60;
        this.top = Math.random() * (canvas.height / 2);
        this.x = canvas.width;
    }
    show() {
        ctx.fillStyle = '#00f2ff';
        ctx.fillRect(this.x, 0, this.width, this.top); // Top Pipe
        ctx.fillRect(this.x, this.top + this.gap, this.width, canvas.height); // Bottom Pipe
    }
    update() {
        this.x -= 3;
    }
}

// --- 3. CORE SYSTEMS ---
function startGame() {
    const name = document.getElementById('username').value || "PILOT";
    lobby.style.display = 'none';
    resetGame();
    gameActive = true;
    draw();
}

function resetGame() {
    bird.y = 300; bird.velocity = 0;
    pipes = []; score = 0; frame = 0;
    scoreEl.innerText = score;
}

function gameOver() {
    gameActive = false;
    lobby.style.display = 'flex';
    lobby.querySelector('h1').innerText = "MISSION FAILED";
}

// Controls
window.addEventListener('keydown', (e) => { if(e.code === 'Space') bird.up(); });
canvas.addEventListener('mousedown', () => bird.up());

bird.up = function() { this.velocity = this.lift; };

// --- 4. THE GAME LOOP ---
function draw() {
    if (!gameActive) return;

    // Clear Screen
    ctx.fillStyle = '#050505';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Spawn Pipes
    if (frame % 90 === 0) pipes.push(new Pipe());

    // Update/Draw Pipes
    for (let i = pipes.length - 1; i >= 0; i--) {
        pipes[i].update();
        pipes[i].show();

        // Collision Check
        if (bird.x + bird.size > pipes[i].x && bird.x < pipes[i].x + pipes[i].width) {
            if (bird.y < pipes[i].top || bird.y + bird.size > pipes[i].top + pipes[i].gap) {
                gameOver();
            }
        }

        // Score Check
        if (pipes[i].x === 51) {
            score++;
            scoreEl.innerText = score;
        }

        if (pipes[i].x < -60) pipes.splice(i, 1);
    }

    bird.update();
    bird.show();
    
    frame++;
    requestAnimationFrame(draw);
}
</script>
</body>
</html>
