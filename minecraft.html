<!DOCTYPE html>
<html>
<head>
    <title>NEON RIVALS | PRO ENGINE</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; }
        #crosshair { position: fixed; top: 50%; left: 50%; width: 24px; height: 24px; border: 2px solid #00f2ff; border-radius: 50%; transform: translate(-50%, -50%); pointer-events: none; }
        #crosshair::after { content: ''; position: absolute; top: 50%; left: 50%; width: 4px; height: 4px; background: #ff00ff; border-radius: 50%; transform: translate(-50%, -50%); }
    </style>
</head>
<body>

<div id="crosshair"></div>

<script type="importmap">
{ "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
</script>

<script type="module">
import * as THREE from 'three';

// 1. ELITE RENDERER (BLOOM & GLOW)
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x010103);
scene.fog = new THREE.FogExp2(0x010103, 0.01);

const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

// 2. PRO LIGHTING
const hemi = new THREE.HemisphereLight(0x00f2ff, 0xff00ff, 0.5);
scene.add(hemi);

// 3. THE "RIVALS" AVATAR (HUMANOID IK)
const player = new THREE.Group();
const torso = new THREE.Mesh(new THREE.BoxGeometry(1, 1.4, 0.6), new THREE.MeshStandardMaterial({color: 0x00f2ff, emissive: 0x00f2ff, emissiveIntensity: 0.2}));
torso.position.y = 1.7;
player.add(torso);

const head = new THREE.Mesh(new THREE.BoxGeometry(0.7, 0.7, 0.7), new THREE.MeshStandardMaterial({color: 0xffffff}));
head.position.y = 2.8;
player.add(head);

// Weapon Attachment
const gun = new THREE.Mesh(new THREE.BoxGeometry(0.3, 0.4, 1.8), new THREE.MeshStandardMaterial({color: 0x111111}));
gun.position.set(0.8, 1.8, 0.8);
player.add(gun);

scene.add(player);

// 4. PHYSICS ENGINE (ACCELERATION)
let velocity = new THREE.Vector3();
const keys = {};
window.onkeydown = (e) => keys[e.code] = true;
window.onkeyup = (e) => keys[e.code] = false;

// 5. PRO CAMERA RIG (SHOULDER MOUNT)
const camHolder = new THREE.Group();
scene.add(camHolder);

function update() {
    requestAnimationFrame(update);

    // Smooth Movement Logic
    const speed = 0.08;
    const friction = 0.9;
    
    if (keys['KeyW']) velocity.z += speed;
    if (keys['KeyS']) velocity.z -= speed;
    if (keys['KeyA']) player.rotation.y += 0.05;
    if (keys['KeyD']) player.rotation.y -= 0.05;

    velocity.multiplyScalar(friction);
    player.translateZ(velocity.z);

    // Animation: Body Tilt (leaning into movement)
    torso.rotation.x = THREE.MathUtils.lerp(torso.rotation.x, velocity.z * 0.5, 0.1);
    
    // Pro Camera Follow (Shoulder Cam)
    const offset = new THREE.Vector3(2, 6, -10).applyQuaternion(player.quaternion);
    const targetCamPos = player.position.clone().add(offset);
    camera.position.lerp(targetCamPos, 0.1);
    camera.lookAt(player.position.clone().add(new THREE.Vector3(0, 2, 0)));

    renderer.render(scene, camera);
}
update();
</script>
</body>
</html>
